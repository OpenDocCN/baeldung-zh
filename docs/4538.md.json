["```\r\n@Component\r\n@Scope(value = \"session\", proxyMode = ScopedProxyMode.TARGET_CLASS)\r\npublic class RedditTemplate {\r\n\r\n    @Autowired\r\n    @Qualifier(\"redditRestTemplate\")\r\n    private OAuth2RestTemplate redditRestTemplate;\r\n\r\n    private RateLimiter rateLimiter;\r\n\r\n    public RedditTemplate() {\r\n        rateLimiter = RateLimiter.create(1);\r\n    }\r\n\r\n    public JsonNode getUserInfo() {\r\n        rateLimiter.acquire();\r\n        return redditRestTemplate.getForObject(\r\n          \"https://oauth.reddit.com/api/v1/me\", JsonNode.class);\r\n    }\r\n\r\n    public JsonNode submitPost(MultiValueMap<String, String> params) {\r\n        rateLimiter.acquire();\r\n        return redditRestTemplate.postForObject(\r\n          \"https://oauth.reddit.com/api/submit\", params, JsonNode.class);\r\n    }\r\n\r\n    public String needsCaptcha() {\r\n        rateLimiter.acquire();\r\n        return redditRestTemplate.getForObject(\r\n          \"https://oauth.reddit.com/api/needs_captcha.json\", String.class);\r\n    }\r\n\r\n    public String getNewCaptcha() {\r\n        rateLimiter.acquire();\r\n        Map<String, String> param = new HashMap<String, String>();\r\n        param.put(\"api_type\", \"json\");\r\n        return redditRestTemplate.postForObject(\r\n          \"https://oauth.reddit.com/api/new_captcha\", param, String.class, param);\r\n    }\r\n\r\n    public OAuth2AccessToken getAccessToken() {\r\n        rateLimiter.acquire();\r\n        return redditRestTemplate.getAccessToken();\r\n    }\r\n}\r\n```","```\r\n@Controller\r\npublic class RedditController {\r\n    @Autowired\r\n    private RedditTemplate redditTemplate;\r\n\r\n    @Autowired\r\n    private UserRepository userReopsitory;\r\n\r\n    @RequestMapping(\"/login\")\r\n    public String redditLogin() {\r\n        JsonNode node = redditTemplate.getUserInfo();\r\n\r\n        loadAuthentication(node.get(\"name\").asText(), \r\n          redditTemplate.getAccessToken());\r\n        return \"redirect:home.html\";\r\n    }\r\n}\r\n```"]