# 在 Groovy 中读取文件

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/groovy-file-read>

## 1.概观

在这个快速教程中，我们将探索在 [Groovy](/web/20220525131321/https://www.baeldung.com/groovy-language) 中读取文件的不同方式。

Groovy 提供了处理文件的便捷方式。我们将专注于`File`类，它有一些读取文件的帮助方法。

让我们在接下来的几节中逐一探讨它们。

## 2.逐行读取一个`File`

有许多像`readLine`和`eachLine`这样的[常规 IO 方法](https://web.archive.org/web/20220525131321/http://docs.groovy-lang.org/2.4.7/html/gapi/org/codehaus/groovy/runtime/IOGroovyMethods.html)可用于逐行读取文件。

### 2.1.使用`File.withReader`

先说 [`File`](https://web.archive.org/web/20220525131321/http://docs.groovy-lang.org/next/html/groovy-jdk/java/io/File.html) `.withReader`法。**它在封面下创建了一个新的`BufferedReader`，我们可以使用`readLine` 方法读取内容。**

例如，让我们逐行读取一个文件，并打印每一行。我们还将返回行数:

[PRE0]

让我们创建一个包含以下内容的纯文本文件`fileContent.txt`,并将其用于测试:

[PRE1]

让我们测试一下我们的实用方法:

[PRE2]

**`withReader`方法也可以和 UTF-8 或 ASCII 这样的字符集参数一起使用来读取编码文件**。让我们看一个例子:

[PRE3]

### 2.2.使用`File.eachLine`

我们也可以使用`eachLine`方法:

[PRE4]

### 2.3.使用`File.newInputStream`和`InputStream.eachLine`

让我们看看如何使用`InputStream`和`eachLine`来读取文件:

[PRE5]

**当我们使用`newInputStream`方法时，我们必须处理关闭`InputStream`** 。

如果我们改为使用`withInputStream`方法，它将为我们处理关闭`InputStream`:

[PRE6]

## 3.将一个`File`读入一个`List`

有时我们需要将文件的内容读入一系列行中。

### 3.1.使用`File.readLines`

为此，我们可以使用`readLines`方法，将文件读入到`Strings`的`List`中。

让我们快速查看一个读取文件内容并返回一个行列表的示例:

[PRE7]

让我们用`fileContent.txt`写一个快速测试:

[PRE8]

### 3.2.使用`File.collect`

我们还可以使用`collect` API 将文件内容读入到`Strings`的`List`中:

[PRE9]

### 3.3.使用 `as`操作符

我们甚至可以利用`as`操作符将文件的内容读入一个`String`数组:

[PRE10]

## 4.将一个`File`读入一个单独的`String`

### 4.1.使用`File.text`

**我们可以简单地通过使用`File`类**的`text`属性将整个文件读入一个单独的`String`。

让我们来看一个例子:

[PRE11]

让我们用一个单元测试来验证这一点:

[PRE12]

### 4.2.使用`File.getText`

如果我们使用`getTest(charset)` 方法，我们可以通过提供像 UTF-8 或 ASCII 这样的字符集参数将编码文件的内容读入到`String`中:

[PRE13]

让我们为单元测试创建一个包含 UTF-8 内容的 HTML 文件，名为`utf8Content.html`:

[PRE14]

让我们看看单元测试:

[PRE15]

## 5.用`File.bytes`读取二进制文件

Groovy 使得读取非文本或二进制文件变得很容易。**通过使用`bytes`属性，我们可以得到`File`的内容作为`byte`数组**:

[PRE16]

我们将使用一个 png 图像文件`sample.png`，包含以下单元测试内容:

[![](img/f98245f31495de47bc8340ce3db90537.png)](/web/20220525131321/https://www.baeldung.com/wp-content/uploads/2019/02/sample.png)

让我们看看单元测试:

[PRE17]

## 6.结论

在这个快速教程中，我们已经看到了使用`File`类的各种方法以及`BufferedReader`和`InputStream`在 Groovy 中读取文件的不同方式。

这些实现和单元测试用例的完整源代码可以在 [GitHub](https://web.archive.org/web/20220525131321/https://github.com/eugenp/tutorials/tree/master/core-groovy) 项目中找到。