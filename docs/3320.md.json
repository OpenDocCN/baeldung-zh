["```\r\npublic class InstrumentationAgent {\r\n    private static volatile Instrumentation globalInstrumentation;\r\n\r\n    public static void premain(final String agentArgs, final Instrumentation inst) {\r\n        globalInstrumentation = inst;\r\n    }\r\n\r\n    public static long getObjectSize(final Object object) {\r\n        if (globalInstrumentation == null) {\r\n            throw new IllegalStateException(\"Agent not initialized.\");\r\n        }\r\n        return globalInstrumentation.getObjectSize(object);\r\n    }\r\n}\r\n```","```\r\nPremain-class: com.baeldung.objectsize.InstrumentationAgent\r\n```","```\r\njavac InstrumentationAgent.java\r\njar cmf MANIFEST.MF InstrumentationAgent.jar InstrumentationAgent.class\r\n```","```\r\npublic class InstrumentationExample {\r\n\r\n    public static void printObjectSize(Object object) {\r\n        System.out.println(\"Object type: \" + object.getClass() +\r\n          \", size: \" + InstrumentationAgent.getObjectSize(object) + \" bytes\");\r\n    }\r\n\r\n    public static void main(String[] arguments) {\r\n        String emptyString = \"\";\r\n        String string = \"Estimating Object Size Using Instrumentation\";\r\n        String[] stringArray = { emptyString, string, \"com.baeldung\" };\r\n        String[] anotherStringArray = new String[100];\r\n        List<String> stringList = new ArrayList<>();\r\n        StringBuilder stringBuilder = new StringBuilder(100);\r\n        int maxIntPrimitive = Integer.MAX_VALUE;\r\n        int minIntPrimitive = Integer.MIN_VALUE;\r\n        Integer maxInteger = Integer.MAX_VALUE;\r\n        Integer minInteger = Integer.MIN_VALUE;\r\n        long zeroLong = 0L;\r\n        double zeroDouble = 0.0;\r\n        boolean falseBoolean = false;\r\n        Object object = new Object();\r\n\r\n        class EmptyClass {\r\n        }\r\n        EmptyClass emptyClass = new EmptyClass();\r\n\r\n        class StringClass {\r\n            public String s;\r\n        }\r\n        StringClass stringClass = new StringClass();\r\n\r\n        printObjectSize(emptyString);\r\n        printObjectSize(string);\r\n        printObjectSize(stringArray);\r\n        printObjectSize(anotherStringArray);\r\n        printObjectSize(stringList);\r\n        printObjectSize(stringBuilder);\r\n        printObjectSize(maxIntPrimitive);\r\n        printObjectSize(minIntPrimitive);\r\n        printObjectSize(maxInteger);\r\n        printObjectSize(minInteger);\r\n        printObjectSize(zeroLong);\r\n        printObjectSize(zeroDouble);\r\n        printObjectSize(falseBoolean);\r\n        printObjectSize(Day.TUESDAY);\r\n        printObjectSize(object);\r\n        printObjectSize(emptyClass);\r\n        printObjectSize(stringClass);\r\n    }\r\n\r\n    public enum Day {\r\n        MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY\r\n    }\r\n}\r\n```","```\r\nVM Options: -javaagent:\"path_to_agent_directory\\InstrumentationAgent.jar\"\r\n```","```\r\nObject type: class java.lang.String, size: 24 bytes\r\nObject type: class java.lang.String, size: 24 bytes\r\nObject type: class [Ljava.lang.String;, size: 32 bytes\r\nObject type: class [Ljava.lang.String;, size: 416 bytes\r\nObject type: class java.util.ArrayList, size: 24 bytes\r\nObject type: class java.lang.StringBuilder, size: 24 bytes\r\nObject type: class java.lang.Integer, size: 16 bytes\r\nObject type: class java.lang.Integer, size: 16 bytes\r\nObject type: class java.lang.Integer, size: 16 bytes\r\nObject type: class java.lang.Integer, size: 16 bytes\r\nObject type: class java.lang.Long, size: 24 bytes\r\nObject type: class java.lang.Double, size: 24 bytes\r\nObject type: class java.lang.Boolean, size: 16 bytes\r\nObject type: class com.baeldung.objectsize.InstrumentationExample$Day, size: 24 bytes\r\nObject type: class java.lang.Object, size: 16 bytes\r\nObject type: class com.baeldung.objectsize.InstrumentationExample$1EmptyClass, size: 16 bytes\r\nObject type: class com.baeldung.objectsize.InstrumentationExample$1StringClass, size: 16 bytes\r\n```"]