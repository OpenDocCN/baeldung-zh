# 从命令行调用 SOAP Web 服务

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/call-soap-command-line>

## 1.概观

在本教程中，我们将展示如何使用不同的命令行界面(CLI)过程来消费 SOAP web 服务。

## 2.SOAP Web 服务

为了运行本文中的示例，[我们将使用在上一篇文章](/web/20221129015121/https://www.baeldung.com/spring-boot-soap-web-service)中开发的 SOAP web 服务。简而言之，这个服务有一个客户端可以访问的端点，在请求中提供一个国家名称。该服务用国家的首都、人口和货币的名称进行回复。

## 3.卷曲

让我们从 cURL 开始，因为它可能是使用最广泛的通过网络协议传输数据的命令行工具。为了测试 SOAP web 服务，我们只需要在请求体中使用 SOAP 信封发出 HTTP 请求。

对于我们的 web 服务，一个简单的 HTTP POST 请求是:

[PRE0]

我们不需要指定我们正在使用 HTTP，因为它是 cURL 中的默认协议。因为我们正在测试请求，所以我们通过`-v`选项使用详细模式。

在 SOAP 信封中，我们指定了国家(波兰)，并用 SOAP 服务器 URL 结束命令。我们已经在我们的计算机上本地安装了服务器，使用了我们之前文章中的[示例。](/web/20221129015121/https://www.baeldung.com/spring-boot-soap-web-service)

由于我们使用了`-v`选项，我们得到了一个详细的响应:

[PRE1]

SOAP web 服务的请求和响应消息可能很长，因此将它们存储在文件中会更方便。**如果我们将请求体保存在`request.xml`中，并将响应的输出重定向到文件`response.xml`，在这种情况下，命令非常简单**:

[PRE2]

一般来说，没有必要像我们之前那样在命令中指定 POST，因为它是由 cURL 推断出来的。

如果我们需要在终端中读取响应，最好是用`xmllint`通过**管道命令来获得正确格式化的 XML 响应**:

[PRE3]

## 4.Wget

让我们使用 Wget 发出同样的请求:

[PRE4]

回应是:

[PRE5]

语法类似于 cURL，我们可以像以前一样将请求和响应主体存储在文件中。

## 5.HTTPie

Wget 和 cURL 是快速测试 SOAP 服务器的非常有用的命令。它们在所有主要的操作系统发行版中都有。它们也可以很容易地与 shell 脚本集成。

HTTPie 的优势在于它提供了一种非常直观的方式来与 Web 服务进行交互。正如[文档](https://web.archive.org/web/20221129015121/https://httpie.io/docs)中所述:“HTTPie 是为测试、调试以及通常与 API&HTTP 服务器的交互而设计的。它们使用简单自然的语法，并提供格式化和彩色化的输出。”

让我们发出之前发出的简单请求，这次使用 HTTPie:

[PRE6]

如果我们想从文件中提取请求体:

[PRE7]

这就像使用文件输入重定向一样简单。

有关如何使用 HTTPie 的更多详细信息，请参考文档。

## 6.摘要

我们已经看到了如何使用 cURL、Wget 和 HTTPie 从命令行快速调用 SOAP Web 服务的简单示例。我们还对这三种工具以及何时使用它们进行了简单的比较。