# 多个 Docker 合成项目之间通信

> 原文::1230【https://web . archive . org/web/202209930061024/https://www . BAE message . com/ops/docker-compose-communication】

## 1.概观

我们通常使用单个`docker-compose.yml`文件来引用 Docker Compose。然而，我们可能需要使用多个 YAML 文件，并且仍然能够让运行的容器成为同一个网络的一部分。

在这个简短的教程中，我们将通过一些例子来看看如何使用一个`network`来连接多个 Docker Compose 项目。

## 2.将网络用于多个 Docker 合成项目

自从 [Docker Compose](/web/20220904150434/https://www.baeldung.com/ops/docker-compose) 引入 [networking](https://web.archive.org/web/20220904150434/https://docs.docker.com/compose/networking/) 以来，我们可以让我们的容器知道一个现有的网络，并让它们加入其中。

例如，假设我们希望我们的 Redis 缓存和 web 应用程序属于同一个网络，但是它们是两个不同的 YAML 文件。

### 2.1.加入现有网络

首先，让我们创建一个网络:

[PRE0]

然后，我们可以在 YAML 模板中定义对现有网络的引用。

让我们看看我们的 Redis 定义:

[PRE1]

让我们也在不同的文件中为我们的 web 应用程序定义它:

[PRE2]

### 2.2.在 YAML 模板中定义网络

**同样，我们也可以在模板内部定义一个`network`，比如我们的`redis_network` :**

[PRE3]

这一次，当我们设置我们的 web 应用程序模板时，我们需要参考 Redis 现有的网络:

[PRE4]

## 3.运行和检查容器

最后，我们可以使用 [up](https://web.archive.org/web/20220904150434/https://docs.docker.com/engine/reference/commandline/compose_up/) 或 [down](https://web.archive.org/web/20220904150434/https://docs.docker.com/engine/reference/commandline/compose_down/) 命令启动或停止我们的服务。

如果我们在一个服务定义中创建一个网络，我们需要首先启动那个服务，就像我们例子中的 Redis 一样:

[PRE5]

让我们[检查](https://web.archive.org/web/20220904150434/https://docs.docker.com/engine/reference/commandline/inspect/)一个正在运行的容器以查看网络定义，例如，我们的 Redis 服务:

[PRE6]

我们将看到`redis_network`的一个条目。对于 web-app 检查，我们将得到相同的输出:

[PRE7]

同样，我们可以考察一下`redis_network`:

[PRE8]

我们的两种服务属于同一个网络:

[PRE9]

## 4.结论

在本文中，我们看到了如何在同一个网络上连接多个 Docker Compose 服务。我们可以让他们加入现有的网络，或者根据服务定义创建一个网络。

和往常一样，我们可以在 GitHub 上找到我们的示例[的源文件`docker-compose.yml`。](https://web.archive.org/web/20220904150434/https://github.com/eugenp/tutorials/tree/master/docker-modules/docker-compose/)