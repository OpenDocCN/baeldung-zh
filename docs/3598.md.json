["```\r\n@Bean\r\npublic MultipartResolver multipartResolver() {\r\n    CommonsMultipartResolver multipartResolver\r\n      = new CommonsMultipartResolver();\r\n    multipartResolver.setMaxUploadSize(5242880);\r\n    return multipartResolver;\r\n}\r\n```","```\r\n@RequestMapping(value = \"/uploadFile\", method = RequestMethod.POST)\r\npublic ModelAndView uploadFile(MultipartFile file) throws IOException {\r\n\r\n    ModelAndView modelAndView = new ModelAndView(\"file\");\r\n    InputStream in = file.getInputStream();\r\n    File currDir = new File(\".\");\r\n    String path = currDir.getAbsolutePath();\r\n    FileOutputStream f = new FileOutputStream(\r\n      path.substring(0, path.length()-1)+ file.getOriginalFilename());\r\n    int ch = 0;\r\n    while ((ch = in.read()) != -1) {\r\n        f.write(ch);\r\n    }\r\n\r\n    f.flush();\r\n    f.close();\r\n\r\n    modelAndView.getModel().put(\"message\", \"File uploaded successfully!\");\r\n    return modelAndView;\r\n}\r\n```","```\r\n@Override\r\npublic ModelAndView resolveException(\r\n  HttpServletRequest request,\r\n  HttpServletResponse response, \r\n  Object object,\r\n  Exception exc) {   \r\n\r\n    ModelAndView modelAndView = new ModelAndView(\"file\");\r\n    if (exc instanceof MaxUploadSizeExceededException) {\r\n        modelAndView.getModel().put(\"message\", \"File size exceeds limit!\");\r\n    }\r\n    return modelAndView;\r\n}\r\n```","```\r\n@ControllerAdvice\r\npublic class FileUploadExceptionAdvice {\r\n\r\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\r\n    public ModelAndView handleMaxSizeException(\r\n      MaxUploadSizeExceededException exc, \r\n      HttpServletRequest request,\r\n      HttpServletResponse response) {\r\n\r\n        ModelAndView modelAndView = new ModelAndView(\"file\");\r\n        modelAndView.getModel().put(\"message\", \"File too large!\");\r\n        return modelAndView;\r\n    }\r\n}\r\n```","```\r\n<Connector port=\"8080\" protocol=\"HTTP/1.1\"\r\n  connectionTimeout=\"20000\"\r\n  redirectPort=\"8443\" \r\n  maxSwallowSize = \"-1\"/>\r\n```"]