# 轻松安排到 Reddit

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/schedule-to-reddit-from-website-feed>

## **1。概述**

在这篇文章中，我们将[继续案例研究](/web/20220117081608/https://www.baeldung.com/case-study-a-reddit-app-with-spring)并且**为 Reddit 应用程序**添加一个新特性，目的是使文章调度变得更加简单。

用户现在可以只从一些喜欢的网站向 Reddit 发布文章，而不是在 schedule UI 中手动缓慢地添加每篇文章。我们将使用 RSS 来做到这一点。

## **2。`Site`实体**

首先，让我们创建一个实体来代表站点:

[PRE0]

请注意，`url`字段代表**的 URL，即**网站的 RSS 提要。

## **3。存储库和服务**

接下来–让我们创建存储库，以便与新的站点实体一起工作:

[PRE1]

以及服务:

[PRE2]

[PRE3]

## **4。从进给加载数据**

现在，让我们看看如何使用罗马图书馆从网站提要加载文章细节。

我们首先需要将罗马加入我们的`pom.xml`:

[PRE4]

然后用它来解析网站的提要:

[PRE5]

最后，这是我们将在回应中使用的简单 DTO:

[PRE6]

## **5。异常处理**

请注意，在解析提要时，我们是如何将整个解析逻辑包装到一个`try-catch`块中的——在出现异常(任何异常)的情况下——我们包装它并抛出它。

原因很简单—**我们需要控制解析过程**抛出的异常类型——这样我们就可以处理该异常并向 API 的客户端提供适当的响应:

[PRE7]

## **6。网站页面**

### **6.1。显示站点**

首先，我们将看到如何显示属于登录用户的站点列表:

[PRE8]

这是非常简单的前端:

[PRE9]

### 6.2。添加新站点

接下来，让我们看看用户如何创建新的收藏夹站点:

[PRE10]

这也是非常简单的客户端:

[PRE11]

### 6.3。验证提要

新提要的验证是一个有点昂贵的操作——我们需要实际检索提要并解析它以完全验证它。下面是简单的服务方法:

[PRE12]

### 6.3。删除一个站点

现在，让我们看看用户如何从他们最喜欢的站点列表中删除一个站点:

[PRE13]

这里是非常简单的服务级别方法:

[PRE14]

## **7。从一个站点安排一篇文章**

现在，让我们实际上开始使用这些网站，并实现一个基本的方法，用户可以安排一个新的帖子发布到 Reddit，不是手动的，而是通过从现有网站加载一篇文章。

### 7.1。修改排班表

让我们从客户站点开始，修改现有的`schedulePostForm.html` ——我们将添加:

[PRE15]

请注意，我们添加了:

*   按钮—“`Load from my Sites`”—启动程序
*   弹出窗口-显示网站及其文章的列表

### 7.2。加载站点

使用一点 javascript，在弹出窗口中加载站点相对容易:

[PRE16]

### 7.3。加载一个站点的帖子

当用户从列表中选择一个网站时，我们需要显示该网站的文章——同样使用一些基本的 js:

[PRE17]

这当然与加载网站文章的简单服务器端操作挂钩:

[PRE18]

最后，我们获取文章数据，填写表单并安排文章发送到 Reddit:

[PRE19]

## **8。集成测试**

最后，让我们在两种不同的提要格式上测试我们的`SiteService`:

[PRE20]

这里显然有一点重复，但我们可以稍后再处理。

## **9。结论**

在这一期中，我们重点关注了一个新的小特性——让发布到 Reddit 的时间安排变得更简单。