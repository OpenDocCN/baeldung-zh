# 在 Spring Boot 使用@JsonComponent

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/spring-boot-jsoncomponent>

## **1。概述**

这篇简短的文章关注的是如何在 Spring Boot 中使用`[@JsonComponent](https://web.archive.org/web/20220627081729/https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/jackson/JsonComponent.html)`注释。

注释允许我们将带注释的类公开为 Jackson 序列化器和/或反序列化器，而不需要手动将其添加到`ObjectMapper`中。

这是核心 Spring Boot 模块的一部分，因此在普通的 Spring Boot 应用程序中不需要额外的依赖。

## **2。序列化**

让我们从下面的`User`对象开始，它包含了一种喜爱的颜色:

[PRE0]

如果我们使用 Jackson 和默认设置序列化这个对象，我们会得到:

[PRE1]

我们可以通过打印 RGB 值来使 JSON 更加简洁，可读性更强——例如，在 CSS 中使用。

在这种情况下，我们只需要创建一个实现`JsonSerializer`的类:

[PRE2]

有了这个序列化器，生成的 JSON 被简化为:

[PRE3]

由于有了`@JsonComponent`注释，序列化程序被注册在 Spring Boot 应用程序的 Jackson `ObjectMapper`中。我们可以用下面的 JUnit 测试来测试这一点:

[PRE4]

## **3。反序列化**

继续同一个例子，我们可以编写一个反序列化器，将 web color `String`转换成 JavaFX Color 对象:

[PRE5]

让我们测试新的反序列化器，并确保一切按预期工作:

[PRE6]

## **4。`Serializer`和`Deserializer`在一个档次**

如果需要，我们可以通过使用两个内部类并在封闭类上添加`@JsonComponent`来连接一个类中的序列化器和反序列化器:

[PRE7]

## **5。结论**

这篇快速教程展示了如何通过利用带有`@JsonComponent`注释的组件扫描，在 Spring Boot 应用程序中快速添加 Jackson 串行器/解串器。

代码片段可以在 GitHub 上找到[。](https://web.archive.org/web/20220627081729/https://github.com/eugenp/tutorials/tree/master/spring-boot-modules/spring-boot-data)