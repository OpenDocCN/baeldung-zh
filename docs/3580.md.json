["```\r\n{ \r\n    \"id\":\"1\",\r\n    \"telephone\":\"001-555-1234\",\r\n    \"favorites\":[\"Milk\",\"Eggs\"],\r\n    \"communicationPreferences\": {\"post\":true, \"email\":true}\r\n}\r\n```","```\r\nPATCH /customers/1234 HTTP/1.1\r\nHost: www.example.com\r\nContent-Type: application/example\r\nIf-Match: \"e0023aa4e\"\r\nContent-Length: 100\r\n\r\n[description of changes]\r\n```","```\r\n{\r\n    \"op\":\"replace\",\r\n    \"path\":\"/telephone\",\r\n    \"value\":\"001-555-5678\"\r\n}\r\n```","```\r\n{\r\n    \"op\":\"add\",\r\n    \"path\":\"/favorites/0\",\r\n    \"value\":\"Bread\"\r\n}\r\n```","```\r\n{\r\n    \"id\":\"1\",\r\n    \"telephone\":\"001-555-1234\",\r\n    \"favorites\":[\"Bread\",\"Milk\",\"Eggs\"],\r\n    \"communicationPreferences\": {\"post\":true, \"email\":true}\r\n}\r\n```","```\r\n{\r\n    \"op\":\"remove\",\r\n    \"path\":\"/communicationPreferences\"\r\n}\r\n```","```\r\n{\r\n    \"id\":\"1\",\r\n    \"telephone\":\"001-555-1234\",\r\n    \"favorites\":[\"Bread\",\"Milk\",\"Eggs\"],\r\n    \"communicationPreferences\":null\r\n}\r\n```","```\r\n{\r\n    \"op\":\"replace\",\r\n    \"path\":\"/telephone\",\r\n    \"value\":\"001-555-5678\"\r\n}\r\n```","```\r\n{ \r\n    \"id\":\"1\", \r\n    \"telephone\":\"001-555-5678\", \r\n    \"favorites\":[\"Bread\",\"Milk\",\"Eggs\"], \r\n    \"communicationPreferences\":null\r\n}\r\n```","```\r\n{\r\n    \"op\":\"move\",\r\n    \"from\":\"/favorites/0\",\r\n    \"path\":\"/favorites/-\"\r\n}\r\n```","```\r\n{ \r\n    \"id\":\"1\", \r\n    \"telephone\":\"001-555-5678\", \r\n    \"favorites\":[\"Milk\",\"Eggs\",\"Bread\"], \r\n    \"communicationPreferences\":null\r\n} \r\n```","```\r\n{\r\n    \"op\":\"copy\",\r\n    \"from\":\"/favorites/0\",\r\n    \"path\":\"/favorites/-\"\r\n}\r\n```","```\r\n{ \r\n    \"id\":\"1\", \r\n    \"telephone\":\"001-555-5678\", \r\n    \"favorites\":[\"Milk\",\"Eggs\",\"Bread\",\"Milk\"], \r\n    \"communicationPreferences\":null\r\n}\r\n```","```\r\n{\r\n    \"op\":\"test\", \r\n    \"path\":\"/telephone\",\r\n    \"value\":\"001-555-5678\"\r\n} \r\n```","```\r\ncurl -i -X PATCH http://localhost:8080/customers/1 -H \"Content-Type: application/json-patch+json\" -d '[\r\n    {\"op\":\"replace\",\"path\":\"/telephone\",\"value\":\"+1-555-56\"},\r\n    {\"op\":\"add\",\"path\":\"/favorites/0\",\"value\":\"Bread\"}\r\n]' \r\n```","```\r\n[\r\n    {\"op\":\"replace\",\"path\":\"/telephone\",\"value\":\"+1-555-56\"},\r\n    {\"op\":\"add\",\"path\":\"/favorites/0\",\"value\":\"Bread\"}\r\n]\r\n```","```\r\n<dependency>\r\n    <groupId>com.github.java-json-tools</groupId>\r\n    <artifactId>json-patch</artifactId>\r\n    <version>1.12</version>\r\n</dependency>\r\n```","```\r\npublic class Customer {\r\n    private String id;\r\n    private String telephone;\r\n    private List<String> favorites;\r\n    private Map<String, Boolean> communicationPreferences;\r\n\r\n    // standard getters and setters\r\n}\r\n```","```\r\n@PatchMapping(path = \"/{id}\", consumes = \"application/json-patch+json\")\r\npublic ResponseEntity<Customer> updateCustomer(@PathVariable String id, @RequestBody JsonPatch patch) {\r\n    try {\r\n        Customer customer = customerService.findCustomer(id).orElseThrow(CustomerNotFoundException::new);\r\n        Customer customerPatched = applyPatchToCustomer(patch, customer);\r\n        customerService.updateCustomer(customerPatched);\r\n        return ResponseEntity.ok(customerPatched);\r\n    } catch (JsonPatchException | JsonProcessingException e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();\r\n    } catch (CustomerNotFoundException e) {\r\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).build();\r\n    }\r\n} \r\n```","```\r\nprivate Customer applyPatchToCustomer(\r\n  JsonPatch patch, Customer targetCustomer) throws JsonPatchException, JsonProcessingException {\r\n    JsonNode patched = patch.apply(objectMapper.convertValue(targetCustomer, JsonNode.class));\r\n    return objectMapper.treeToValue(patched, Customer.class);\r\n} \r\n```","```\r\ncurl -i -X POST http://localhost:8080/customers -H \"Content-Type: application/json\" \r\n  -d '{\"telephone\":\"+1-555-12\",\"favorites\":[\"Milk\",\"Eggs\"],\"communicationPreferences\":{\"post\":true,\"email\":true}}' \r\n```","```\r\nHTTP/1.1 201\r\nLocation: http://localhost:8080/customers/1 \r\n```","```\r\ncurl -i -X PATCH http://localhost:8080/customers/1 -H \"Content-Type: application/json-patch+json\" -d '[\r\n    {\"op\":\"replace\",\"path\":\"/telephone\",\"value\":\"+1-555-56\"}, \r\n    {\"op\":\"add\",\"path\":\"/favorites/0\",\"value\": \"Bread\"}\r\n]'\r\n```","```\r\nHTTP/1.1 200\r\nContent-Type: application/json\r\nTransfer-Encoding: chunked\r\nDate: Fri, 14 Feb 2020 21:23:14 GMT\r\n\r\n{\"id\":\"1\",\"telephone\":\"+1-555-56\",\"favorites\":[\"Bread\",\"Milk\",\"Eggs\"],\"communicationPreferences\":{\"post\":true,\"email\":true}}\r\n```"]