# 用 Spring 引导 Hibernate 5

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/hibernate-5-spring>

## **1。概述**

在本文中，我们将讨论如何使用 Java 和 XML 配置来用 Spring 引导 Hibernate 5。

本文主要关注 Spring MVC。我们的文章 [Spring Boot 与 Hibernate](/web/20220707035940/https://www.baeldung.com/spring-boot-hibernate) 描述了如何在 Spring Boot 使用 Hibernate。

## **2。弹簧集成**

用原生 Hibernate API 引导一个`SessionFactory`有点复杂，会占用我们相当多的代码行(如果你真的需要这么做，看看[官方文档](https://web.archive.org/web/20220707035940/http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#bootstrap-native))。

幸运的是， **Spring 支持引导`SessionFactory`** `–` ，因此我们只需要几行 Java 代码或 XML 配置。

## **3。Maven 依赖关系**

让我们首先向我们的`pom.xml`添加必要的依赖项:

[PRE0]

[spring-orm 模块](https://web.archive.org/web/20220707035940/https://search.maven.org/classic/#search%7Cgav%7C1%7Cg%3A%22org.springframework%22%20AND%20a%3A%22spring-orm%22)提供了与 Hibernate 的 spring 集成:

[PRE1]

为了简单起见，我们将使用 [H2](https://web.archive.org/web/20220707035940/https://search.maven.org/classic/#search%7Cgav%7C1%7Cg%3A%22com.h2database%22%20AND%20a%3A%22h2%22) 作为数据库:

[PRE2]

最后，我们将使用 [Tomcat JDBC 连接池](https://web.archive.org/web/20220707035940/https://search.maven.org/classic/#search%7Cgav%7C1%7Cg%3A%22org.apache.tomcat%22%20AND%20a%3A%22tomcat-dbcp%22)，它比 Spring 提供的`DriverManagerDataSource`更适合生产目的:

[PRE3]

## **4。配置**

如前所述，Spring 支持我们引导 Hibernate `SessionFactory`。

我们所要做的就是**定义一些 beans 以及一些参数**。

有了 Spring，我们有两种配置选择，一种是基于 Java 的，另一种是基于 XML 的。

### **4.1。使用 Java 配置**

在 Spring 上使用 Hibernate 5，从 Hibernate 4 的[到现在变化不大:我们不得不使用包`org.springframework.orm.hibernate5`中的`LocalSessionFactoryBean`，而不是`org.springframework.orm.hibernate4`。](/web/20220707035940/https://www.baeldung.com/hibernate-4-spring)

与之前的 Hibernate 4 一样，我们必须为`LocalSessionFactoryBean`、`DataSource`和`PlatformTransactionManager`定义 beans，以及一些特定于 Hibernate 的属性。

让我们创建我们的`HibernateConfig`类来**用 Spring** 配置 Hibernate 5:

[PRE4]

### **4.2。使用 XML 配置**

作为第二个选择，我们还可以用基于 XML 的配置来配置 Hibernate 5:

[PRE5]

正如我们很容易看到的，我们定义了与前面基于 Java 的配置完全相同的 beans 和参数。

**为了将 XML 引导到 Spring 上下文**，如果应用程序配置了 Java 配置，我们可以使用一个简单的 Java 配置文件:

[PRE6]

或者，如果整个配置是纯 XML 的，我们可以简单地将 XML 文件提供给 Spring 上下文。

## **5。用途**

至此，Hibernate 5 已经完全配置了 Spring，我们可以在任何需要的时候直接**注入原始 Hibernate `SessionFactory`** :

[PRE7]

## **6。支持的数据库**

不幸的是，Hibernate 项目并没有提供一个官方的数据库支持列表。

也就是说，**很容易看出特定的数据库类型是否可能被支持**，我们可以看一下受支持方言的[列表](https://web.archive.org/web/20220707035940/http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#database-dialect)。

## 7 .**。结论**

在这个快速教程中，**我们用 Hibernate 5** 配置了 Spring 用 Java 和 XML 配置。

与往常一样，GitHub 上的[提供了示例的完整源代码。](https://web.archive.org/web/20220707035940/https://github.com/eugenp/tutorials/tree/master/persistence-modules/spring-hibernate-5)