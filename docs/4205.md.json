["```\r\npublic class Folder {\r\n    private Long id;\r\n    private String name;\r\n    private String owner;\r\n    private Date created;\r\n    private Date modified;\r\n    private Date lastAccess;\r\n    private List<File> files = new ArrayList<>();\r\n\r\n    // standard getters and setters\r\n} \r\n```","```\r\npublic class File {\r\n    private Long id;\r\n    private String name;\r\n\r\n    // standard getters and setters\r\n} \r\n```","```\r\n{\r\n    \"name\": \"Root Folder\",\r\n    \"files\": [\r\n        {\"id\": 1, \"name\": \"File 1\"},\r\n        {\"id\": 2, \"name\": \"File 2\"}\r\n    ]\r\n} \r\n```","```\r\npublic class FolderJsonSerializer extends StdSerializer<Folder> {\r\n\r\n    public FolderJsonSerializer() {\r\n        super(Folder.class);\r\n    }\r\n\r\n    @Override\r\n    public void serialize(Folder value, JsonGenerator gen, SerializerProvider provider)\r\n      throws IOException {\r\n        gen.writeStartObject();\r\n        gen.writeStringField(\"name\", value.getName());\r\n\r\n        gen.writeArrayFieldStart(\"files\");\r\n        for (File file : value.getFiles()) {\r\n            gen.writeStartObject();\r\n            gen.writeNumberField(\"id\", file.getId());\r\n            gen.writeStringField(\"name\", file.getName());\r\n            gen.writeEndObject();\r\n        }\r\n        gen.writeEndArray();\r\n\r\n        gen.writeEndObject();\r\n    }\r\n}\r\n```","```\r\n@Override\r\npublic void serialize(Folder value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n    gen.writeStartObject();\r\n    gen.writeStringField(\"name\", value.getName());\r\n\r\n    ObjectMapper mapper = (ObjectMapper) gen.getCodec();\r\n    gen.writeFieldName(\"files\");\r\n    String stringValue = mapper.writeValueAsString(value.getFiles());\r\n    gen.writeRawValue(stringValue);\r\n\r\n    gen.writeEndObject();\r\n} \r\n```","```\r\n@Override\r\npublic void serialize(Folder value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n    gen.writeStartObject();\r\n    gen.writeStringField(\"name\", value.getName());\r\n\r\n    provider.defaultSerializeField(\"files\", value.getFiles(), gen);\r\n\r\n    gen.writeEndObject();\r\n} \r\n```","```\r\n@Override\r\npublic void serialize(Folder value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n    gen.writeStartObject();\r\n    gen.writeStringField(\"name\", value.getName());\r\n\r\n    provider.defaultSerializeField(\"files\", value.getFiles(), gen);\r\n\r\n    // this line causes exception\r\n    provider.defaultSerializeField(\"details\", value, gen);\r\n\r\n    gen.writeEndObject();\r\n} \r\n```","```\r\nprivate final JsonSerializer<Object> defaultSerializer;\r\n\r\npublic FolderJsonSerializer(JsonSerializer<Object> defaultSerializer) {\r\n    super(Folder.class);\r\n    this.defaultSerializer = defaultSerializer;\r\n} \r\n```","```\r\npublic class FolderBeanSerializerModifier extends BeanSerializerModifier {\r\n\r\n    @Override\r\n    public JsonSerializer<?> modifySerializer(\r\n      SerializationConfig config, BeanDescription beanDesc, JsonSerializer<?> serializer) {\r\n\r\n        if (beanDesc.getBeanClass().equals(Folder.class)) {\r\n            return new FolderJsonSerializer((JsonSerializer<Object>) serializer);\r\n        }\r\n\r\n        return serializer;\r\n    }\r\n} \r\n```","```\r\nObjectMapper mapper = new ObjectMapper();\r\n\r\nSimpleModule module = new SimpleModule();\r\nmodule.setSerializerModifier(new FolderBeanSerializerModifier());\r\n\r\nmapper.registerModule(module); \r\n```","```\r\n@Override\r\npublic void serialize(Folder value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n    gen.writeStartObject();\r\n    gen.writeStringField(\"name\", value.getName());\r\n\r\n    provider.defaultSerializeField(\"files\", value.getFiles(), gen);\r\n\r\n    gen.writeFieldName(\"details\");\r\n    defaultSerializer.serialize(value, gen, provider);\r\n\r\n    gen.writeEndObject();\r\n} \r\n```","```\r\n@JsonIgnore\r\nprivate List<File> files = new ArrayList<>(); \r\n```","```\r\n{\r\n    \"name\": \"Root Folder\",\r\n    \"files\": [\r\n        {\"id\": 1, \"name\": \"File 1\"},\r\n        {\"id\": 2, \"name\": \"File 2\"}\r\n    ],\r\n    \"details\": {\r\n        \"id\":1,\r\n        \"name\": \"Root Folder\",\r\n        \"owner\": \"root\",\r\n        \"created\": 1565203657164,\r\n        \"modified\": 1565203657164,\r\n        \"lastAccess\": 1565203657164\r\n    }\r\n} \r\n```"]