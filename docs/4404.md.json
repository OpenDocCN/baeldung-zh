["```\r\n<dependency>\r\n    <groupId>org.osgi</groupId> \r\n    <artifactId>org.osgi.core</artifactId>\r\n    <version>6.0.0</version>\r\n    <scope>provided</scope>\r\n</dependency>\r\n```","```\r\npublic class HelloWorld implements BundleActivator {\r\n    public void start(BundleContext ctx) {\r\n        System.out.println(\"Hello world.\");\r\n    }\r\n    public void stop(BundleContext bundleContext) {\r\n        System.out.println(\"Goodbye world.\");\r\n    }\r\n}\r\n```","```\r\n<packaging>bundle</packaging>\r\n```","```\r\n<plugin>\r\n    <groupId>org.apache.felix</groupId>\r\n    <artifactId>maven-bundle-plugin</artifactId>\r\n    <version>3.3.0</version>\r\n    <extensions>true</extensions>\r\n    <configuration>\r\n        <instructions>\r\n            <Bundle-SymbolicName>\r\n                ${pom.groupId}.${pom.artifactId}\r\n            </Bundle-SymbolicName>\r\n            <Bundle-Name>${pom.name}</Bundle-Name>\r\n            <Bundle-Version>${pom.version}</Bundle-Version>\r\n            <Bundle-Activator>\r\n                com.baeldung.osgi.sample.activator.HelloWorld\r\n            </Bundle-Activator>\r\n            <Private-Package>\r\n                com.baeldung.osgi.sample.activator\r\n            </Private-Package>            \r\n        </instructions>\r\n    </configuration>\r\n</plugin>\r\n```","```\r\n<KARAF_HOME>/bin/karaf start\r\n```","```\r\n> bundle:install mvn:com.baeldung/osgi-intro-sample-activator/1.0-SNAPSHOT\r\nBundle ID: 63\r\n```","```\r\n> bundle:start 63\r\nHello World\r\n```","```\r\n> bundle:stop 63\r\n> bundle:uninstall 63\r\n```","```\r\npackage com.baeldung.osgi.sample.service.definition;\r\npublic interface Greeter {\r\n    public String sayHiTo(String name);\r\n}\r\n```","```\r\npackage com.baeldung.osgi.sample.service.implementation;\r\npublic class GreeterImpl implements Greeter, BundleActivator {\r\n\r\n    private ServiceReference<Greeter> reference;\r\n    private ServiceRegistration<Greeter> registration;\r\n\r\n    @Override\r\n    public String sayHiTo(String name) {\r\n        return \"Hello \" + name;\r\n    }\r\n\r\n    @Override \r\n    public void start(BundleContext context) throws Exception {\r\n        System.out.println(\"Registering service.\");\r\n        registration = context.registerService(\r\n          Greeter.class, \r\n          new GreeterImpl(), \r\n          new Hashtable<String, String>());\r\n        reference = registration\r\n          .getReference();\r\n    }\r\n\r\n    @Override \r\n    public void stop(BundleContext context) throws Exception {\r\n        System.out.println(\"Unregistering service.\");\r\n        registration.unregister();\r\n    }\r\n}\r\n```","```\r\n<plugin>\r\n    <groupId>org.apache.felix</groupId>\r\n    <artifactId>maven-bundle-plugin</artifactId>\r\n    <extensions>true</extensions>\r\n    <configuration>\r\n        <instructions>\r\n            <Bundle-SymbolicName>\r\n                ${project.groupId}.${project.artifactId}\r\n            </Bundle-SymbolicName>\r\n            <Bundle-Name>\r\n                ${project.artifactId}\r\n            </Bundle-Name>\r\n            <Bundle-Version>\r\n                ${project.version}\r\n            </Bundle-Version>\r\n            <Bundle-Activator>\r\n                com.baeldung.osgi.sample.service.implementation.GreeterImpl\r\n            </Bundle-Activator>\r\n            <Private-Package>\r\n                com.baeldung.osgi.sample.service.implementation\r\n            </Private-Package>\r\n            <Export-Package>\r\n                com.baeldung.osgi.sample.service.definition\r\n            </Export-Package>\r\n        </instructions>\r\n    </configuration>\r\n</plugin>\r\n```","```\r\npublic class Client implements BundleActivator, ServiceListener {\r\n}\r\n```","```\r\nprivate BundleContext ctx;\r\nprivate ServiceReference serviceReference;\r\n\r\npublic void start(BundleContext ctx) {\r\n    this.ctx = ctx;\r\n    try {\r\n        ctx.addServiceListener(\r\n          this, \"(objectclass=\" + Greeter.class.getName() + \")\");\r\n    } catch (InvalidSyntaxException ise) {\r\n        ise.printStackTrace();\r\n    }\r\n}\r\n```","```\r\npublic void serviceChanged(ServiceEvent serviceEvent) {\r\n    int type = serviceEvent.getType();\r\n    switch (type){\r\n        case(ServiceEvent.REGISTERED):\r\n            System.out.println(\"Notification of service registered.\");\r\n            serviceReference = serviceEvent\r\n              .getServiceReference();\r\n            Greeter service = (Greeter)(ctx.getService(serviceReference));\r\n            System.out.println( service.sayHiTo(\"John\") );\r\n            break;\r\n        case(ServiceEvent.UNREGISTERING):\r\n            System.out.println(\"Notification of service unregistered.\");\r\n            ctx.ungetService(serviceEvent.getServiceReference());\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n```","```\r\npublic void stop(BundleContext bundleContext) {\r\n    if(serviceReference != null) {\r\n        ctx.ungetService(serviceReference);\r\n    }\r\n}\r\n```","```\r\n<dependency>\r\n    <groupId>com.baeldung</groupId>\r\n    <artifactId>osgi-intro-sample-service</artifactId>\r\n    <version>1.0-SNAPSHOT</version>\r\n    <scope>provided</scope>\r\n</dependency>\r\n<dependency>\r\n    <groupId>org.osgi</groupId>\r\n    <artifactId>org.osgi.core</artifactId>\r\n    <version>6.0.0</version>\r\n</dependency>\r\n```","```\r\n> install mvn:com.baeldung/osgi-intro-sample-service/1.0-SNAPSHOT\r\nBundle ID: 64\r\n> install mvn:com.baeldung/osgi-intro-sample-client/1.0-SNAPSHOT\r\nBundle ID: 65\r\n```","```\r\n> start 65\r\n```","```\r\n> start 64\r\nRegistering service.\r\nService registered.\r\nHello John\r\n```"]