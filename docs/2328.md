# 在 Java 中交换两个变量

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/java-swap-two-variables>

## 1.概观

有时，我们可能想交换代码中的两个变量。

在本教程中，我们将看到几种方法来做到这一点，这取决于我们想要交换的变量类型。然后，我们将检查每种方法的性能。

## 2.最简单的方法:使用临时变量

交换两个变量的最简单方法是使用第三个变量作为临时存储:

[PRE0]

这种方法特别容易阅读和理解，即使是初学者。它的主要缺点是需要一个临时变量。

**我们应该记住，这个方法是唯一可以交换`Object`变量的方法。**

### 2.1.为什么不换一个方法呢？

如果我们必须在代码中的几个地方交换变量，那么创建一个像这样交换变量的方法听起来可能很有吸引力:

[PRE1]

不幸的是，这在 Java [中不起作用，因为对象的引用](/web/20220605184827/https://www.baeldung.com/java-pass-by-value-or-pass-by-reference)在方法调用期间被复制。

如果我们真的想要一个交换方法，**我们必须在你的对象**周围使用一个包装类，并交换包装中包含的对象:

[PRE2]

和交换方法:

[PRE3]

使用此方法，在方法返回后，括起来的`Strings`将保持交换状态。

## 3.没有临时变量

如果我们的变量是原始类型的，我们可以找到不使用临时变量来交换它们的方法。

我们来看几个例子。

### 3.1.使用算术运算

我们可以用数学来交换没有临时变量的变量，有几种方法。对于下面的例子，让我们假设我们想要交换两个整数`a=5` 和`b=10`。

我们可以使用加法和减法进行交换:

[PRE4]

或者，我们可以使用乘法和除法:

[PRE5]

我们应该记住，如果任何一个数字是 0，这个方法就不起作用，因为第一个操作将导致存储一个 0，使算法的其余部分无用。而且，如果`b` =0，由于被零除，会抛出一个 [`ArithmeticException`](/web/20220605184827/https://www.baeldung.com/java-overflow-underflow) 。

我们还应该注意原语的容量，因为加法/乘法会导致数字超过原语类型的最大值。这可能会导致交换后出现错误，而不会引发任何异常。

比如如果`a` =整数。MAX_VALUE，交换前`a=2147483647`和`b=10` ，交换后`a=10`、`b=-1.`

如果我们处理的是`char`、`byte`或`short`类型的数据，则需要进行显式强制转换，因为算术运算符的结果至少在 Java 中是`int`类型的值:

[PRE6]

### 3.2.使用逻辑运算

如果我们正在处理整数数据类型(即 `char, short, byte, int, long`)，我们可以使用异或按位运算符(XOR)。“^”运算符将对变量的所有位进行按位异或运算:

[PRE7]

**我们应该知道，对于算术运算符，按位异或运算符至少返回`int`数据类型**。因此，如果我们处理字符、字节或短整型变量，我们必须对每一行进行 XOR 运算。

### 3.3.单行变体

**我们可以使用单行版本的交换方法来减少代码量:**

[PRE8]

这是因为表达式是根据运算符的优先级进行计算的。如果最初`a` = 5、`b` = 10，最后一个表达式相当于 `a = 5 ^ 10 ^ (b = 5)`。第一次运算(`5 ^ 10`)正好是多行算法的第一行，然后我们给`b`赋值 5(括号有优先权)，最后我们计算`15 ^ 5`正好是算法的第三行。

## 4.技术性能分析

我们刚刚看到 Java 中有几种交换两个变量的方法，但是哪种方法效率更高呢？为了给出每个算法的性能趋势，我们执行了变量交换方法的循环，并测量了交换两个变量 100.000 次所需的时间。我们运行了 10 次测试来计算每个算法的平均执行时间。结果如下:

[![swapping variables - performance comparison](img/9b86fb0a867226b638c42c4044f6b3f0.png)](/web/20220605184827/https://www.baeldung.com/wp-content/uploads/2022/05/swapping-variables-performance-tab.png)

绝对时间在这里并不重要，因为它取决于运行测试的机器。我们只看到有些算法比其他算法慢。对于乘除法来说尤其如此，无论是单行版还是单行版，它都要慢得多。相反，XOR 算法在多行和单行版本中都是最有效的。

用临时变量交换对象也很有效，这很容易理解，因为在这种情况下只操纵指针。

## 5.结论

在本文中，我们研究了如何根据变量的类型交换 Java 中的两个变量。

我们描述了如何交换对象，然后我们研究了用几种算法交换原语类型的几种方法。最后，我们看了每种方法的性能。

与往常一样，所有示例的源代码都可以在 GitHub 上的[处获得。](https://web.archive.org/web/20220605184827/https://github.com/eugenp/tutorials/tree/master/core-java-modules/core-java-lang-math-3)