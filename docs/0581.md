# Java 中的压缩和解压缩

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/java-compress-and-uncompress>

## **1。概述**

在这个快速教程中，我们将学习如何将一个文件压缩到一个归档文件中，以及如何解压缩这个归档文件，所有这些都使用 Java 提供的核心库。

这些核心库是`**java.util.zip**`包的一部分，在这里我们可以找到所有与压缩和解压缩相关的工具。

## **2。压缩一个文件**

首先，让我们来看一个简单的操作，压缩一个文件。

对于我们的例子，我们将把名为`test1.txt` 的文件压缩到名为`compressed.zip`的归档文件中。

当然，我们将首先从磁盘访问该文件:

[PRE0]

## **3。压缩多个文件**

接下来，让我们看看如何将多个文件压缩成一个 zip 文件。我们将把`test1.txt`和`test2.txt`压缩成`multiCompressed.zip`:

[PRE1]

## **4。压缩一个目录**

现在让我们讨论如何压缩整个目录。我们将把`zipTest`压缩成`dirCompressed.zip`:

[PRE2]

请注意:

*   为了压缩子目录，我们递归地遍历它们。
*   每当我们找到一个目录时，我们就把它的名字附加到后代`ZipEntry`的名字上来保存层次结构。
*   我们还为每个空目录创建一个目录条目。

## **5。解压缩档案文件**

现在让我们解压缩一个归档文件并提取其内容。

对于这个例子，我们将把`compressed.zip`解压到一个名为`unzipTest:`的新文件夹中

[PRE3]

在`while`循环中，**我们将遍历每个`ZipEntry`，首先检查它是否是一个目录**。如果是，那么我们将使用`mkdirs()`方法创建目录；否则，我们将继续创建文件:

[PRE4]

这里需要注意的是，在`else`分支上，我们还检查文件的父目录是否存在。这对于在 Windows 上创建的归档文件是必要的，因为根目录在 zip 文件中没有相应的条目。

在`newFile()`方法中可以看到另一个关键点:

[PRE5]

这种方法可以防止将文件写入目标文件夹之外的文件系统。这个漏洞被称为 Zip Slip，我们可以[在这里](https://web.archive.org/web/20220817154022/https://snyk.io/research/zip-slip-vulnerability)了解更多信息。

## **6。结论**

在本文中，我们展示了如何使用 Java 库来压缩和解压缩文件。

这些例子的实现可以在 GitHub 的[中找到。](https://web.archive.org/web/20220817154022/https://github.com/eugenp/tutorials/tree/master/core-java-modules/core-java-io)