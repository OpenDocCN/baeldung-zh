["```\r\n<dependency>\r\n    <groupId>org.apache.cxf</groupId>\r\n    <artifactId>cxf-rt-databinding-aegis</artifactId>\r\n    <version>3.1.8</version>\r\n</dependency>\r\n```","```\r\npublic class Course {\r\n    private int id;\r\n    private String name;\r\n    private String instructor;\r\n    private Date enrolmentDate;\r\n\r\n    // standard getters and setters\r\n}\r\n```","```\r\npublic interface CourseRepo {\r\n    String getGreeting();\r\n    void setGreeting(String greeting);\r\n    Map<Integer, Course> getCourses();\r\n    void setCourses(Map<Integer, Course> courses);\r\n    void addCourse(Course course);  \r\n}\r\n```","```\r\npublic class CourseRepoImpl implements CourseRepo {\r\n    private String greeting;\r\n    private Map<Integer, Course> courses = new HashMap<>();\r\n\r\n    // standard getters and setters\r\n\r\n    @Override\r\n    public void addCourse(Course course) {\r\n        courses.put(course.getId(), course);\r\n    }\r\n}\r\n```","```\r\n<mappings xmlns:ns=\"http://courserepo.baeldung.com\">\r\n    <mapping name=\"ns:Baeldung\">\r\n        <property name=\"greeting\" style=\"attribute\"/>\r\n    </mapping>\r\n</mappings>\r\n```","```\r\n<mappings>\r\n    <mapping>\r\n        <property name=\"instructor\" ignore=\"true\"/>\r\n    </mapping>\r\n</mappings>\r\n```","```\r\npublic class BaeldungTest {\r\n    private AegisContext context;\r\n    private String fileName = \"baeldung.xml\";\r\n\r\n    // other methods\r\n}\r\n```","```\r\ncontext = new AegisContext();\r\n```","```\r\nSet<Type> rootClasses = new HashSet<Type>();\r\nrootClasses.add(CourseRepo.class);\r\ncontext.setRootClasses(rootClasses);\r\n```","```\r\nMap<Class<?>, String> beanImplementationMap = new HashMap<>();\r\nbeanImplementationMap.put(CourseRepoImpl.class, \"CourseRepo\");\r\ncontext.setBeanImplementationMap(beanImplementationMap);\r\n```","```\r\ncontext.setWriteXsiTypes(true);\r\n```","```\r\ncontext.initialize();\r\n```","```\r\nprivate void initializeContext() {\r\n    // ...\r\n}\r\n```","```\r\nprivate CourseRepoImpl initCourseRepo() {\r\n    Course restCourse = new Course();\r\n    restCourse.setId(1);\r\n    restCourse.setName(\"REST with Spring\");\r\n    restCourse.setInstructor(\"Eugen\");\r\n    restCourse.setEnrolmentDate(new Date(1234567890000L));\r\n\r\n    Course securityCourse = new Course();\r\n    securityCourse.setId(2);\r\n    securityCourse.setName(\"Learn Spring Security\");\r\n    securityCourse.setInstructor(\"Eugen\");\r\n    securityCourse.setEnrolmentDate(new Date(1456789000000L));\r\n\r\n    CourseRepoImpl courseRepo = new CourseRepoImpl();\r\n    courseRepo.setGreeting(\"Welcome to Beldung!\");\r\n    courseRepo.addCourse(restCourse);\r\n    courseRepo.addCourse(securityCourse);\r\n    return courseRepo;\r\n}\r\n```","```\r\nprivate void marshalCourseRepo(CourseRepo courseRepo) throws Exception {\r\n    AegisWriter<XMLStreamWriter> writer = context.createXMLStreamWriter();\r\n    AegisType aegisType = context.getTypeMapping().getType(CourseRepo.class);\r\n    XMLStreamWriter xmlWriter = XMLOutputFactory.newInstance()\r\n      .createXMLStreamWriter(new FileOutputStream(fileName));\r\n\r\n    writer.write(courseRepo, \r\n      new QName(\"http://aegis.cxf.baeldung.com\", \"baeldung\"), false, xmlWriter, aegisType);\r\n\r\n    xmlWriter.close();\r\n}\r\n```","```\r\nprivate CourseRepo unmarshalCourseRepo() throws Exception {       \r\n    AegisReader<XMLStreamReader> reader = context.createXMLStreamReader();\r\n    XMLStreamReader xmlReader = XMLInputFactory.newInstance()\r\n      .createXMLStreamReader(new FileInputStream(fileName));\r\n\r\n    CourseRepo courseRepo = (CourseRepo) reader.read(\r\n      xmlReader, context.getTypeMapping().getType(CourseRepo.class));\r\n\r\n    xmlReader.close();\r\n    return courseRepo;\r\n}\r\n```","```\r\n@Test\r\npublic void whenMarshalingAndUnmarshalingCourseRepo_thenCorrect()\r\n  throws Exception {\r\n    initializeContext();\r\n    CourseRepo inputRepo = initCourseRepo();\r\n    marshalCourseRepo(inputRepo);\r\n    CourseRepo outputRepo = unmarshalCourseRepo();\r\n    Course restCourse = outputRepo.getCourses().get(1);\r\n    Course securityCourse = outputRepo.getCourses().get(2);\r\n\r\n    // JUnit assertions\r\n}\r\n```","```\r\nassertEquals(\"Welcome to Beldung!\", outputRepo.getGreeting());\r\nassertEquals(\"REST with Spring\", restCourse.getName());\r\nassertEquals(new Date(1234567890000L), restCourse.getEnrolmentDate());\r\nassertNull(restCourse.getInstructor());\r\nassertEquals(\"Learn Spring Security\", securityCourse.getName());\r\nassertEquals(new Date(1456789000000L), securityCourse.getEnrolmentDate());\r\nassertNull(securityCourse.getInstructor());\r\n```","```\r\n<ns1:baeldung xmlns:ns1=\"http://aegis.cxf.baeldung.com\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:type=\"ns1:CourseRepo\">\r\n    <ns1:courses>\r\n        <ns2:entry xmlns:ns2=\"urn:org.apache.cxf.aegis.types\">\r\n            <ns2:key>1</ns2:key>\r\n            <ns2:value xsi:type=\"ns1:Course\">\r\n                <ns1:enrolmentDate>2009-02-14T06:31:30+07:00\r\n                </ns1:enrolmentDate>\r\n                <ns1:id>1</ns1:id>\r\n                <ns1:instructor>Eugen</ns1:instructor>\r\n                <ns1:name>REST with Spring</ns1:name>\r\n            </ns2:value>\r\n        </ns2:entry>\r\n        <ns2:entry xmlns:ns2=\"urn:org.apache.cxf.aegis.types\">\r\n            <ns2:key>2</ns2:key>\r\n            <ns2:value xsi:type=\"ns1:Course\">\r\n                <ns1:enrolmentDate>2016-03-01T06:36:40+07:00\r\n                </ns1:enrolmentDate>\r\n                <ns1:id>2</ns1:id>\r\n                <ns1:instructor>Eugen</ns1:instructor>\r\n                <ns1:name>Learn Spring Security</ns1:name>\r\n            </ns2:value>\r\n        </ns2:entry>\r\n    </ns1:courses>\r\n    <ns1:greeting>Welcome to Beldung!</ns1:greeting>\r\n</ns1:baeldung>\r\n```","```\r\n<ns1:baeldung xmlns:ns1=\"http://aegis.cxf.baeldung.com\"\r\n    xmlns:ns=\"http://courserepo.baeldung.com\"\r\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n    xsi:type=\"ns:Baeldung\" greeting=\"Welcome to Beldung!\">\r\n    <ns:courses>\r\n        <ns2:entry xmlns:ns2=\"urn:org.apache.cxf.aegis.types\">\r\n            <ns2:key>1</ns2:key>\r\n            <ns2:value xsi:type=\"ns1:Course\">\r\n                <ns1:enrolmentDate>2009-02-14T06:31:30+07:00\r\n                </ns1:enrolmentDate>\r\n                <ns1:id>1</ns1:id>\r\n                <ns1:name>REST with Spring</ns1:name>\r\n            </ns2:value>\r\n        </ns2:entry>\r\n        <ns2:entry xmlns:ns2=\"urn:org.apache.cxf.aegis.types\">\r\n            <ns2:key>2</ns2:key>\r\n            <ns2:value xsi:type=\"ns1:Course\">\r\n                <ns1:enrolmentDate>2016-03-01T06:36:40+07:00\r\n                </ns1:enrolmentDate>\r\n                <ns1:id>2</ns1:id>\r\n                <ns1:name>Learn Spring Security</ns1:name>\r\n            </ns2:value>\r\n        </ns2:entry>\r\n    </ns:courses>\r\n</ns1:baeldung>\r\n```"]