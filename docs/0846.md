# 在 Dockerfile 文件副本中保留子目录结构

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/ops/dockerfile-copy-same-subdirectory-structure>

## 1.概观

在本文中，我们将学习将一个目录复制到 Docker 映像中，并保留子目录结构。

## 2.将本地目录复制到映像

让我们创建以下文件树:

[PRE0]

这可以通过运行以下命令来完成:

[PRE1]

我们现在开始我们的`[Dockerfile](/web/20221005092324/https://www.baeldung.com/ops/docker-compose#2-building-an-image)`:

`$ touch Dockerfile`

然后，让我们插入以下内容:

[PRE2]

让我们逐行理解内容:

*   第一行声明我们使用最新的 ubuntu 映像作为基础映像
*   **第二行将`folder1`目录的内容复制到图像的`workdir`目录中。**如果`workdir`还不存在，它将被创建
*   第三行执行图像外壳中的 [`ls`](/web/20221005092324/https://www.baeldung.com/linux/symlinks-in-listing-all-files#using-ls) 命令，递归地列出`workdir`文件夹中所有子目录的内容

我们现在可以建立我们的 Docker 形象了:

[PRE3]

不出所料，递归打印`workdir`的内容突出显示它包含了`folder1`的所有子目录和文件。

## 3.将本地目录合并到映像中

现在，让我们稍微更新一下文件树，使其符合以下内容:

[PRE4]

为了进行修改，我们将运行以下命令:

[PRE5]

**我们现在想要将`folder2`的内容合并到图像的`workdir`中。**让我们完成我们的`Dockerfile`:

[PRE6]

第二个`COPY`指令不会删除之前添加的文件。让我们建立自己的形象来检查这种行为:

[PRE7]

如日志所示，`folder1`和`folder2`的所有子目录确实被复制到了`workdir`。

另外，我们选择这个例子是为了演示合并行为。如果我们想要的只是将`folder1`和`folder2`的内容同时复制到图像的`workdir`目录中，我们可以利用 **`COPY`可以接受多个来源**这一事实:

[PRE8]

## 4.结论

在本教程中，我们看到了如何将本地目录复制到 Docker 映像，同时保持它们的子目录结构。

和往常一样，代码可以在 GitHub 上找到[。](https://web.archive.org/web/20221005092324/https://github.com/eugenp/tutorials/tree/master/docker-modules/docker-images)