# 获取 Java 中可信证书的列表

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/java-list-trusted-certificates>

## 1.概观

在这个快速教程中，我们将通过快速实用的例子来学习如何阅读 Java 中的可信证书列表。

## 2.加载`KeyStore`

Java 将可信证书存储在一个名为`cacerts`的特殊文件中，该文件位于我们的 Java 安装文件夹中。

让我们从读取这个文件并将其加载到 [`KeyStore`](/web/20221206113225/https://www.baeldung.com/java-keystore#what-is-a-keystore) 开始:

[PRE0]

**这个`KeyStore`的默认密码是`“changeit”`，但是如果它之前在我们的系统中被改变，它可能是不同的。**

一旦加载完毕，`KeyStore`将保存我们的可信证书，接下来，我们将看到如何读取它们。

## 3.从指定的`KeyStore`读取证书

我们将使用`[PKIXParameters](https://web.archive.org/web/20221206113225/https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/cert/PKIXParameters.html)`类，它接受一个`KeyStore`作为构造函数参数:

[PRE1]

`PKIXParameters`类通常用于验证证书，但是在我们的例子中，我们只是用它从我们的`KeyStore`中获取证书。

当创建一个`PKIXParametrs`的实例时，它会构建一个`[TrustAnchor](https://web.archive.org/web/20221206113225/https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/cert/TrustAnchor.html)`列表，该列表将包含我们的`KeyStore`中存在的可信证书。

一个`TrustAnchor`实例仅仅代表一个可信的证书。

## 4.从默认位置读取证书`KeyStore`

我们还可以通过**使用`TrustManagerFactory`类并在没有`KeyStore`** 的情况下初始化它来获得系统中存在的可信证书的列表，这将使用默认的`KeyStore`。

如果我们没有明确提供一个`KeyStore`,默认情况下将使用前一章中的同一个:

[PRE2]

在上面的例子中，我们使用了`X509TrustManager`，它是一个专门的`TrustManager`，用于[认证 SSL 连接](/web/20221206113225/https://www.baeldung.com/x-509-authentication-in-spring-security)的远程部分。

注意，这种行为可能取决于特定的 JDK 实现，因为[规范](https://web.archive.org/web/20221206113225/https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/TrustManagerFactory.html#init(java.security.KeyStore))没有定义在`init()` `KeyStore`参数为`null`的情况下应该发生什么。

## 5.证书别名

证书别名就是唯一标识证书的`String`。

**在 Java 导入的默认证书中，还有一个由公共互联网域名注册商 GoDaddy 发布的著名证书，我们将在测试中使用它:**

[PRE3]

让我们看看如何读取`KeyStore`中的所有证书别名:

[PRE4]

在下一个示例中，我们将了解如何通过别名检索证书:

[PRE5]

## 6.结论

在这篇简短的文章中，我们通过快速实用的例子，研究了在 Java 中列出可信证书的不同方式。

和往常一样，代码片段可以在 GitHub 上找到[。](https://web.archive.org/web/20221206113225/https://github.com/eugenp/tutorials/tree/master/core-java-modules/core-java-security-2)