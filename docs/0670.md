# 从 Docker 获取网络信息

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/ops/docker-network-information>

## 1.概观

Docker 的主要功能之一是创建和隔离网络。

在本教程中，我们将了解如何提取关于网络及其容器的信息。

## 2.Docker 中的网络

当我们运行 Docker 容器时，我们可以定义要向外界公开哪些端口。这意味着我们使用(或创建)一个孤立的网络，并把我们的容器放在里面。我们可以决定如何与这个网络通信，以及如何在这个网络内部通信。

让我们创建几个容器，并在它们之间配置网络。他们将全部在端口 8080 上内部工作，并且他们将被放置在两个网络中。

它们每个都将托管一个简单的“Hello World”HTTP 服务:

[PRE0]

以下是这些容器的示意图，以便更直观地展示:

[![](img/cede04647cb22abf8a25c9d6f5f0589c.png)](/web/20220727020703/https://www.baeldung.com/wp-content/uploads/2020/09/docker-compose-bael.png)

让我们用 [`docker-compose`](https://web.archive.org/web/20220727020703/https://docs.docker.com/compose/) 命令启动它们:

[PRE1]

## 3.检查网络

首先，让我们列出所有可用的 Docker 网络:

[PRE2]

我们可以看到`bridge`网络，这是我们使用`docker run`命令时使用的默认网络。此外，我们可以看到我们用`docker-compose` 命令创建的网络。

让我们用`docker inspect`命令来检查它们:

[PRE3]

这将产生冗长、详细的输出。我们很少需要所有这些信息。**幸运的是，我们可以使用 [Go 模板](https://web.archive.org/web/20220727020703/https://golang.org/pkg/text/template/)对其进行格式化，并且只提取符合我们需求的元素。**让我们只得到`network1:`的子网

[PRE4]

## 4.检查集装箱

同样，我们可以检查特定的容器。首先，让我们列出所有容器及其标识符:

[PRE5]

**现在我们将使用容器的 ID 作为`inspect`命令的参数来查找其 IP 地址。**与网络类似，我们可以格式化输出以获得我们需要的信息。我们将检查第二个容器及其在我们创建的两个网络中的地址:

[PRE6]

或者，我们可以使用 [`docker exec`](https://web.archive.org/web/20220727020703/https://docs.docker.com/engine/reference/commandline/exec/) 命令直接从容器中打印主机:

[PRE7]

## 5.集装箱之间的通信

利用关于我们 Docker 网络的知识，我们可以在同一个网络中的容器之间建立通信。

首先，让我们进入“test1”容器:

[PRE8]

然后，使用 curl 向“test2”容器发送一个请求:

[PRE9]

由于我们在码头工人的网络中，我们也可以使用别名来代替 IP 地址。 Docker 的内置 DNS 服务将为我们解析地址:

[PRE10]

注意，我们不能连接到“test3”容器，因为它在不同的网络中。通过 IP 地址连接将超时:

[PRE11]

通过别名连接也会失败，因为 DNS 服务无法识别它:

[PRE12]

为此，我们需要将“test3”容器添加到“network1”中(从容器外部):

[PRE13]

现在对“测试 3”的请求将正确工作:

[PRE14]

## 6.结论

在本教程中，我们看到了如何为 Docker 容器配置网络，然后查询关于它们的信息。