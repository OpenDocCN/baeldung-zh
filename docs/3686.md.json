["```\r\n@SpringBootApplication\r\npublic class GetServerPortApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(GetServerPortApplication.class, args);\r\n    }\r\n} \r\n```","```\r\nserver.port=7777 \r\n```","```\r\nserver.port=0 \r\n```","```\r\nserver.port=7777\r\n```","```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(classes = GetServerPortApplication.class,\r\n  webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n@ActiveProfiles(\"fixedport\")\r\npublic class GetServerFixedPortUnitTest {\r\n    private final static int EXPECTED_PORT = 7777;\r\n    ....\r\n} \r\n```","```\r\n@Value(\"${server.port}\")\r\nprivate int serverPort;\r\n\r\n@Test\r\npublic void givenFixedPortAsServerPort_whenReadServerPort_thenGetThePort() {\r\n    assertEquals(EXPECTED_PORT, serverPort);\r\n} \r\n```","```\r\n@Autowired\r\nprivate ServerProperties serverProperties;\r\n\r\n@Test\r\npublic void givenFixedPortAsServerPort_whenReadServerProps_thenGetThePort() {\r\n    int port = serverProperties.getPort();\r\n\r\n    assertEquals(EXPECTED_PORT, port);\r\n}\r\n```","```\r\nserver.port=0\r\n```","```\r\n....\r\n@ActiveProfiles(\"randomport\")\r\npublic class GetServerRandomPortUnitTest {\r\n...\r\n} \r\n```","```\r\n@Value(\"${server.port}\")\r\nprivate int randomServerPort;\r\n\r\n@Test\r\npublic void given0AsServerPort_whenReadServerPort_thenGet0() {\r\n    assertEquals(0, randomServerPort);\r\n}\r\n\r\n@Autowired\r\nprivate ServerProperties serverProperties;\r\n\r\n@Test\r\npublic void given0AsServerPort_whenReadServerProps_thenGet0() {\r\n    int port = serverProperties.getPort();\r\n\r\n    assertEquals(0, port);\r\n} \r\n```","```\r\n@Autowired\r\nprivate ServletWebServerApplicationContext webServerAppCtxt;\r\n\r\n@Test\r\npublic void given0AsServerPort_whenReadWebAppCtxt_thenGetThePort() {\r\n    int port = webServerAppCtxt.getWebServer().getPort();\r\n\r\n    assertTrue(port > 1023);\r\n} \r\n```","```\r\n@Service\r\npublic class ServerPortService {\r\n    private int port;\r\n\r\n    public int getPort() {\r\n        return port;\r\n    }\r\n\r\n    @EventListener\r\n    public void onApplicationEvent(final ServletWebServerInitializedEvent event) {\r\n        port = event.getWebServer().getPort();\r\n    }\r\n}\r\n```","```\r\n@Autowired\r\nprivate ServerPortService serverPortService;\r\n\r\n@Test\r\npublic void given0AsServerPort_whenReadFromListener_thenGetThePort() {\r\n    int port = serverPortService.getPort();\r\n\r\n    assertTrue(port > 1023);\r\n} \r\n```"]