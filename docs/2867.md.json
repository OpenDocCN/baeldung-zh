["```\r\n<dependency>\r\n    <groupId>org.springframework</groupId>\r\n    <artifactId>spring-web</artifactId>\r\n    <version>5.3.13</version>\r\n</dependency> \r\n```","```\r\npublic class UserInterceptor extends HandlerInterceptorAdapter {\r\n\r\n    private static Logger log = LoggerFactory.getLogger(UserInterceptor.class);\r\n\r\n    ...\r\n}\r\n```","```\r\npublic static boolean isUserLogged() {\r\n    try {\r\n        return !SecurityContextHolder.getContext().getAuthentication()\r\n          .getName().equals(\"anonymousUser\");\r\n    } catch (Exception e) {\r\n        return false;\r\n    }\r\n}\r\n```","```\r\n@Override\r\npublic boolean preHandle(HttpServletRequest request,\r\n  HttpServletResponse response, Object object) throws Exception {\r\n    if (isUserLogged()) {\r\n        addToModelUserDetails(request.getSession());\r\n    }\r\n    return true;\r\n}\r\n```","```\r\nprivate void addToModelUserDetails(HttpSession session) {\r\n    log.info(\"=============== addToModelUserDetails =========================\");\r\n\r\n    String loggedUsername \r\n      = SecurityContextHolder.getContext().getAuthentication().getName();\r\n    session.setAttribute(\"username\", loggedUsername);\r\n\r\n    log.info(\"user(\" + loggedUsername + \") session : \" + session);\r\n    log.info(\"=============== addToModelUserDetails =========================\");\r\n}\r\n```","```\r\n@Override\r\npublic void postHandle(\r\n  HttpServletRequest req, \r\n  HttpServletResponse res,\r\n  Object o, \r\n  ModelAndView model) throws Exception {\r\n\r\n    if (model != null && !isRedirectView(model)) {\r\n        if (isUserLogged()) {\r\n        addToModelUserDetails(model);\r\n    }\r\n    }\r\n}\r\n```","```\r\npublic static boolean isRedirectView(ModelAndView mv) {\r\n    String viewName = mv.getViewName();\r\n    if (viewName.startsWith(\"redirect:/\")) {\r\n        return true;\r\n    }\r\n    View view = mv.getView();\r\n    return (view != null && view instanceof SmartView\r\n      && ((SmartView) view).isRedirectView());\r\n}\r\n```","```\r\nprivate void addToModelUserDetails(ModelAndView model) {\r\n    log.info(\"=============== addToModelUserDetails =========================\");\r\n\r\n    String loggedUsername = SecurityContextHolder.getContext()\r\n      .getAuthentication().getName();\r\n    model.addObject(\"loggedUsername\", loggedUsername);\r\n\r\n    log.trace(\"session : \" + model.getModel());\r\n    log.info(\"=============== addToModelUserDetails =========================\");\r\n}\r\n```","```\r\n@Override\r\npublic void addInterceptors(InterceptorRegistry registry) {\r\n    registry.addInterceptor(new UserInterceptor());\r\n}\r\n```","```\r\n<mvc:interceptors>\r\n    <bean id=\"userInterceptor\" class=\"com.baeldung.web.interceptor.UserInterceptor\"/>\r\n</mvc:interceptors>\r\n```"]