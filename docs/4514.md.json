["```\r\npublic class Investment {\r\n    private String transactionId;\r\n    private String owner;\r\n    private Long amount;\r\n\r\n    public Investment (String transactionId, String owner, Long amount) {\r\n        this.transactionId = transactionId;\r\n        this.owner = owner;\r\n        this.amount = amount;\r\n    }\r\n\r\n    // standard getters and setters\r\n}\r\n```","```\r\nimport org.apache.log4j.NDC;\r\n\r\n@RestController\r\npublic class Log4JController {\r\n    @Autowired\r\n    @Qualifier(\"Log4JInvestmentService\")\r\n    private InvestmentService log4jBusinessService;\r\n\r\n    @RequestMapping(\r\n      value = \"/ndc/log4j\", \r\n      method = RequestMethod.POST)\r\n    public ResponseEntity<Investment> postPayment(\r\n      @RequestBody Investment investment) {\r\n\r\n        NDC.push(\"tx.id=\" + investment.getTransactionId());\r\n        NDC.push(\"tx.owner=\" + investment.getOwner());\r\n\r\n        log4jBusinessService.transfer(investment.getAmount());\r\n\r\n        NDC.pop();\r\n        NDC.pop();\r\n\r\n        NDC.remove();\r\n\r\n        return \r\n          new ResponseEntity<Investment>(investment, HttpStatus.OK);\r\n    }\r\n}\r\n```","```\r\nlog4j.appender.consoleAppender.layout.ConversionPattern \r\n  = %-4r [%t] %5p %c{1} - %m - [%x]%n\r\n```","```\r\nPOST /logging-service/ndc/log4j\r\n{\r\n  \"transactionId\": \"4\",\r\n  \"owner\": \"Marc\",\r\n  \"amount\": 2000\r\n}\r\n```","```\r\n48569 [http-nio-8080-exec-3]  INFO Log4JInvestmentService \r\n  - Preparing to transfer 2000$. \r\n  - [tx.id=4 tx.owner=Marc]\r\n49231 [http-nio-8080-exec-4]  INFO Log4JInvestmentService \r\n  - Preparing to transfer 1500$. \r\n  - [tx.id=6 tx.owner=Samantha]\r\n49334 [http-nio-8080-exec-3]  INFO Log4JInvestmentService \r\n  - Has transfer of 2000$ completed successfully ? true. \r\n  - [tx.id=4 tx.owner=Marc] \r\n50023 [http-nio-8080-exec-4]  INFO Log4JInvestmentService \r\n  - Has transfer of 1500$ completed successfully ? true. \r\n  - [tx.id=6 tx.owner=Samantha]\r\n...\r\n```","```\r\nimport org.apache.logging.log4j.ThreadContext;\r\n\r\n@RestController\r\npublic class Log4J2Controller {\r\n    @Autowired\r\n    @Qualifier(\"Log4J2InvestmentService\")\r\n    private InvestmentService log4j2BusinessService;\r\n\r\n    @RequestMapping(\r\n      value = \"/ndc/log4j2\", \r\n      method = RequestMethod.POST)\r\n    public ResponseEntity<Investment> postPayment(\r\n      @RequestBody Investment investment) {\r\n\r\n        ThreadContext.push(\"tx.id=\" + investment.getTransactionId());\r\n        ThreadContext.push(\"tx.owner=\" + investment.getOwner());\r\n\r\n        log4j2BusinessService.transfer(investment.getAmount());\r\n\r\n        ThreadContext.pop();\r\n        ThreadContext.pop();\r\n\r\n        ThreadContext.clearAll();\r\n\r\n        return \r\n          new ResponseEntity<Investment>(investment, HttpStatus.OK);\r\n    }\r\n}\r\n```","```\r\n<Configuration status=\"INFO\">\r\n    <Appenders>\r\n        <Console name=\"stdout\" target=\"SYSTEM_OUT\">\r\n            <PatternLayout\r\n              pattern=\"%-4r [%t] %5p %c{1} - %m -%x%n\" />\r\n        </Console>\r\n    </Appenders>\r\n    <Loggers>\r\n        <Logger name=\"com.baeldung.log4j2\" level=\"TRACE\" />\r\n            <AsyncRoot level=\"DEBUG\">\r\n            <AppenderRef ref=\"stdout\" />\r\n        </AsyncRoot>\r\n    </Loggers>\r\n</Configuration> \r\n```","```\r\n204724 [http-nio-8080-exec-1]  INFO Log4J2InvestmentService \r\n  - Preparing to transfer 1500$. \r\n  - [tx.id=6, tx.owner=Samantha]\r\n205455 [http-nio-8080-exec-2]  INFO Log4J2InvestmentService \r\n  - Preparing to transfer 2000$. \r\n  - [tx.id=4, tx.owner=Marc]\r\n205525 [http-nio-8080-exec-1]  INFO Log4J2InvestmentService \r\n  - Has transfer of 1500$ completed successfully ? false. \r\n  - [tx.id=6, tx.owner=Samantha]\r\n206064 [http-nio-8080-exec-2]  INFO Log4J2InvestmentService \r\n  - Has transfer of 2000$ completed successfully ? true. \r\n  - [tx.id=4, tx.owner=Marc]\r\n...\r\n```","```\r\n<dependency>\r\n    <groupId>org.jboss.logging</groupId>\r\n    <artifactId>jboss-logging</artifactId>\r\n    <version>3.3.0.Final</version>\r\n</dependency>\r\n```","```\r\nimport org.jboss.logging.NDC;\r\n\r\n@RestController\r\npublic class JBossLoggingController {\r\n    @Autowired\r\n    @Qualifier(\"JBossLoggingInvestmentService\")\r\n    private InvestmentService jbossLoggingBusinessService;\r\n\r\n    @RequestMapping(\r\n      value = \"/ndc/jboss-logging\", \r\n      method = RequestMethod.POST)\r\n    public ResponseEntity<Investment> postPayment(\r\n      @RequestBody Investment investment) {\r\n\r\n        NDC.push(\"tx.id=\" + investment.getTransactionId());\r\n        NDC.push(\"tx.owner=\" + investment.getOwner());\r\n\r\n        jbossLoggingBusinessService.transfer(investment.getAmount());\r\n\r\n        NDC.pop();\r\n        NDC.pop();\r\n\r\n        NDC.clear();\r\n\r\n        return \r\n          new ResponseEntity<Investment>(investment, HttpStatus.OK);\r\n    }\r\n}\r\n```","```\r\n17045 [http-nio-8080-exec-1]  INFO JBossLoggingInvestmentService \r\n  - Preparing to transfer 1,500$. \r\n  - [tx.id=6, tx.owner=Samantha]\r\n17725 [http-nio-8080-exec-1]  INFO JBossLoggingInvestmentService \r\n  - Has transfer of 1,500$ completed successfully ? true. \r\n  - [tx.id=6, tx.owner=Samantha]\r\n18257 [http-nio-8080-exec-2]  INFO JBossLoggingInvestmentService \r\n  - Preparing to transfer 2,000$. \r\n  - [tx.id=4, tx.owner=Marc]\r\n18904 [http-nio-8080-exec-2]  INFO JBossLoggingInvestmentService \r\n  - Has transfer of 2,000$ completed successfully ? true. \r\n  - [tx.id=4, tx.owner=Marc]\r\n...\r\n```"]