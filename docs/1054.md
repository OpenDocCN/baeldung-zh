# 具有 Spring Security OAuth 的前端应用程序–授权代码流

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/spring-security-oauth-authorization-code-flow>

## **1。概述**

在本教程中，我们将继续我们的 [Spring Security OAuth 系列](/web/20221012100324/https://www.baeldung.com/spring-security-oauth)，为授权代码流构建一个简单的前端。

请记住，这里的重点是客户端；看看[Spring REST API+oauth 2+angular js](/web/20221012100324/https://www.baeldung.com/rest-api-spring-oauth2-angular-legacy)的文章——查看授权和资源服务器的详细配置。

## **2。授权服务器**

在我们到达前端之前，我们需要在我们的授权服务器配置中添加我们的客户端详细信息:

[PRE0]

请注意我们现在是如何启用授权代码授权类型的，具体如下:

*   我们的客户 id 是`fooClientId`
*   我们的范围是`foo`、`read `和`write`
*   重定向 URI 是`http://localhost:8089/`(对于我们的前端应用程序，我们将使用端口 8089)

## **3。前端**

现在，让我们开始构建简单的前端应用程序。

由于我们将在这里的应用程序中使用 Angular 6，我们需要在我们的 Spring Boot 应用程序中使用`frontend-maven-plugin`插件:

[PRE1]

注意，自然地，我们需要首先在我们的机器上安装[node . js](https://web.archive.org/web/20221012100324/https://nodejs.org/en/)；我们将使用 Angular CLI 为我们的应用程序生成基础:

ng new authCode

## **4。角度模块**

现在，让我们详细讨论我们的角度模块。

下面是我们简单的`AppModule`:

[PRE2]

我们的模块由三个组件和一个服务组成，我们将在下面的部分中讨论它们

### **4.1。应用组件**

让我们从我们的`AppComponent`开始，它是根组件:

[PRE3]

### **4.2。家用组件**

接下来是我们的主要组件，`HomeComponent`:

[PRE4]

请注意:

*   如果用户未登录，将只显示登录按钮
*   登录按钮将用户重定向到授权 URL
*   当用户被重定向回授权代码时，我们使用该代码检索访问令牌

### **4.3。Foo 组件**

我们的第三个也是最后一个组件是`FooComponent`；这将显示从资源服务器获得的`Foo`资源:

[PRE5]

### 4.4。应用服务

现在，让我们来看看`AppService`:

[PRE6]

让我们在这里快速概括一下我们的实现:

*   `checkCredentials()`:检查用户是否登录
*   `retrieveToken()`:使用授权码获取接入令牌
*   `saveToken()`:将访问令牌保存在 cookie 中
*   `getResource()`:使用其 ID 获取 Foo 详细信息
*   `logout()`:删除访问令牌 cookie

## **5。运行应用程序**

为了运行我们的应用程序并确保一切正常运行，我们需要:

*   首先，在端口 8081 上运行授权服务器
*   然后，在端口 8082 上运行资源服务器
*   最后，运行前端

我们需要首先构建我们的应用程序:

[PRE7]

然后将目录更改为 src/main/resources:

[PRE8]

然后在端口 8089 上运行我们的应用程序:

[PRE9]

## **6。结论**

我们学习了如何使用 Spring 和 Angular 6 为授权代码流构建一个简单的前端客户端。

和往常一样，完整的源代码可以在 GitHub 上找到[。](https://web.archive.org/web/20221012100324/https://github.com/Baeldung/spring-security-oauth/tree/master/oauth-legacy)