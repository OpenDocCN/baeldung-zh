["```\r\nimport java.util.Properties;\r\nimport javax.sql.DataSource;\r\nimport org.apache.tomcat.dbcp.dbcp.BasicDataSource;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.PropertySource;\r\nimport org.springframework.core.env.Environment;\r\nimport org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor;\r\nimport org.springframework.orm.hibernate3.HibernateTransactionManager;\r\nimport org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\nimport com.google.common.base.Preconditions;\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@PropertySource({ \"classpath:persistence-mysql.properties\" })\r\n@ComponentScan({ \"com.baeldung.spring.persistence\" })\r\npublic class PersistenceConfig {\r\n\r\n   @Autowired\r\n   private Environment env;\r\n\r\n   @Bean\r\n   public AnnotationSessionFactoryBean sessionFactory() {\r\n      AnnotationSessionFactoryBean sessionFactory = new AnnotationSessionFactoryBean();\r\n      sessionFactory.setDataSource(restDataSource());\r\n      sessionFactory.setPackagesToScan(new String[] { \"com.baeldung.spring.persistence.model\" });\r\n      sessionFactory.setHibernateProperties(hibernateProperties());\r\n\r\n      return sessionFactory;\r\n   }\r\n\r\n   @Bean\r\n   public DataSource restDataSource() {\r\n      BasicDataSource dataSource = new BasicDataSource();\r\n      dataSource.setDriverClassName(env.getProperty(\"jdbc.driverClassName\"));\r\n      dataSource.setUrl(env.getProperty(\"jdbc.url\"));\r\n      dataSource.setUsername(env.getProperty(\"jdbc.user\"));\r\n      dataSource.setPassword(env.getProperty(\"jdbc.pass\"));\r\n\r\n      return dataSource;\r\n   }\r\n\r\n   @Bean\r\n   @Autowired\r\n   public HibernateTransactionManager transactionManager(SessionFactory sessionFactory) {\r\n      HibernateTransactionManager txManager = new HibernateTransactionManager();\r\n      txManager.setSessionFactory(sessionFactory);\r\n\r\n      return txManager;\r\n   }\r\n\r\n   @Bean\r\n   public PersistenceExceptionTranslationPostProcessor exceptionTranslation() {\r\n      return new PersistenceExceptionTranslationPostProcessor();\r\n   }\r\n\r\n   Properties hibernateProperties() {\r\n      return new Properties() {\r\n         {\r\n            setProperty(\"hibernate.hbm2ddl.auto\", env.getProperty(\"hibernate.hbm2ddl.auto\"));\r\n            setProperty(\"hibernate.dialect\", env.getProperty(\"hibernate.dialect\"));\r\n         }\r\n      };\r\n   }\r\n}\r\n```","```\r\ntxManager.setSessionFactory(sessionFactory().getObject());\r\n```","```\r\n<context:property-placeholder location=\"classpath:persistence-mysql.properties\" />\r\n\r\n<bean id=\"sessionFactory\" \r\n  class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\">\r\n    <property name=\"dataSource\" ref=\"dataSource\" />\r\n    <property name=\"packagesToScan\" value=\"com.baeldung.spring.persistence.model\" />\r\n    <property name=\"hibernateProperties\">\r\n        <props>\r\n            <prop key=\"hibernate.hbm2ddl.auto\">${hibernate.hbm2ddl.auto}</prop>\r\n            <prop key=\"hibernate.dialect\">${hibernate.dialect}</prop>\r\n        </props>\r\n    </property>\r\n</bean>\r\n\r\n<bean id=\"dataSource\" \r\n  class=\"org.apache.tomcat.dbcp.dbcp.BasicDataSource\">\r\n    <property name=\"driverClassName\" value=\"${jdbc.driverClassName}\" />\r\n    <property name=\"url\" value=\"${jdbc.url}\" />\r\n    <property name=\"username\" value=\"${jdbc.user}\" />\r\n    <property name=\"password\" value=\"${jdbc.pass}\" />\r\n</bean>\r\n\r\n<bean id=\"txManager\" \r\n  class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\">\r\n    <property name=\"sessionFactory\" ref=\"sessionFactory\" />\r\n</bean>\r\n\r\n<bean id=\"persistenceExceptionTranslationPostProcessor\" \r\n  class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/>\r\n```","```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@ImportResource({ \"classpath:persistenceConfig.xml\" })\r\npublic class PersistenceXmlConfig {\r\n   //\r\n}\r\n```","```\r\n# jdbc.X\r\njdbc.driverClassName=com.mysql.jdbc.Driver\r\njdbc.url=jdbc:mysql://localhost:3306/spring_hibernate_dev?createDatabaseIfNotExist=true\r\njdbc.user=tutorialuser\r\njdbc.pass=tutorialmy5ql\r\n# hibernate.X\r\nhibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\nhibernate.show_sql=false\r\nhibernate.hbm2ddl.auto=create-drop\r\n```","```\r\npublic abstract class FooHibernateDAO{\r\n\r\n   @Autowired\r\n   SessionFactory sessionFactory;\r\n\r\n   ...\r\n\r\n   protected Session getCurrentSession(){\r\n      return sessionFactory.getCurrentSession();\r\n   }\r\n}\r\n```","```\r\n<dependency>\r\n   <groupId>org.hibernate</groupId>\r\n   <artifactId>hibernate-core</artifactId>\r\n   <version>3.6.10.Final</version>\r\n</dependency>\r\n```","```\r\n<dependency>\r\n   <groupId>org.javassist</groupId>\r\n   <artifactId>javassist</artifactId>\r\n   <version>3.18.2-GA</version>\r\n</dependency>\r\n```","```\r\n<dependency>\r\n   <groupId>mysql</groupId>\r\n   <artifactId>mysql-connector-java</artifactId>\r\n   <version>5.1.32</version>\r\n   <scope>runtime</scope>\r\n</dependency>\r\n```","```\r\n<dependency>\r\n    <groupId>org.apache.tomcat</groupId>\r\n    <artifactId>tomcat-dbcp</artifactId>\r\n    <version>7.0.55</version>\r\n</dependency>\r\n```"]