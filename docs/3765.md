# 设置带反射的字段值

> 原文：<https://web.archive.org/web/20220930061024/https://www.baeldung.com/java-set-private-field-value>

## 1.概观

在我们的[上一篇文章](/web/20220630014027/https://www.baeldung.com/java-reflection-read-private-field-value)中，我们讨论了如何从 Java 的不同类中读取`private`字段的值。然而，有些情况下我们需要设置字段的值，比如在一些库中我们没有访问字段的权限。

在这个快速教程中，我们将讨论如何通过使用[反射](/web/20220630014027/https://www.baeldung.com/java-reflection) API 来设置 Java 中不同类的字段值。

**注意，我们将在这里的例子中使用与我们在[上一篇文章](/web/20220630014027/https://www.baeldung.com/java-reflection-read-private-field-value)中使用的相同的`Person`类。**

## 2.设置原始字段

我们可以通过使用`Field#setXxx`方法来**设置作为原语的字段。**

### 2.1.设置整数字段

我们可以使用`setByte,` `setShort`、s `etInt`和`setLong`方法分别设置`byte` `,` `short`、`int`和`long`字段:

[PRE0]

**也可以对原始类型**执行[拆箱](/web/20220630014027/https://www.baeldung.com/java-wrapper-classes#autoboxing-and-unboxing)

[PRE1]

**原始数据类型的 s `etXxx`方法也支持[缩小](/web/20220630014027/https://www.baeldung.com/java-primitive-conversions#widening-primitive-conversions) :**

[PRE2]

### 2.2.设置浮动类型字段

为了设置`float`和`double`字段，我们需要分别使用`setFloat`和`setDouble`方法:

[PRE3]

### 2.3.设置字符字段

要设置`char`字段，我们可以使用`setChar`方法:

[PRE4]

### 2.4.设置布尔字段

类似地，我们可以使用`setBoolean`方法来设置`boolean`字段:

[PRE5]

## 3.设置作为对象的字段

我们可以通过使用`Field#set`方法来**设置作为对象的字段:**

[PRE6]

## 4.例外

现在，让我们讨论 JVM 在设置字段时可能抛出的异常。

### 4.1.`IllegalArgumentException`

如果我们使用与目标字段的类型不兼容的`setXxx`赋值函数，JVM 将抛出`IllegalArgumentException` **。在我们的例子中，如果我们写`nameField.setInt(person, 26)`，JVM 抛出这个异常，因为字段的类型是`String`，而不是`int`或`Integer`:**

[PRE7]

正如我们已经看到的，s `etXxx`方法支持基本类型的缩小。需要注意的是**我们需要提供正确的目标来成功缩小范围**。否则，JVM 抛出一个`IllegalArgumentException`:

[PRE8]

### 4.2.`IllegalAccessException`

**如果我们试图设置一个没有访问权限**的`private` 字段，那么 JVM 将抛出一个`IllegalAccessException`。在上面的例子中，如果我们不写语句`nameField.setAccessible(true)`，那么 JVM 抛出异常:

[PRE9]

## 5.结论

在本教程中，我们看到了如何在 Java 中修改或设置一个类的私有字段的值。我们还看到了 JVM 可能抛出的异常以及导致这些异常的原因。

和往常一样，这个例子的完整代码可以在 GitHub 的[上找到。](https://web.archive.org/web/20220630014027/https://github.com/eugenp/tutorials/tree/master/core-java-modules/core-java-reflection-2)